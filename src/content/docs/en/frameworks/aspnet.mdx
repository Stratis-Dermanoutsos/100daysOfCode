---
title: "ASP.NET"
description: "This section contains notes on the ASP.NET framework."
---

import Gist from '/src/components/General/Gist.astro'

***ASP.NET*** is a web application framework built on top of the ***.NET*** framework. It is used to build dynamic web applications and web services using languages such as ***C\#*** or ***Visual Basic*** ***.NET***. ***ASP.NET*** includes features such as **web forms**, **MVC**, **web API**, and **SignalR** for building different types of web applications.

## Razor Pages

***Razor Pages*** is a less complex than [***MVC***](#mvc).

However, instead of the ***M*odels**, ***V*iews**, and ***C*ontrollers** that make ***MVC***, ***Razor Pages*** have 2 parts:

- Razor Page (Similar to ***V*iew**)
- Page Model (Contains all the non-***V*iew** code)

Everything that can be done with ***MVC*** can also be done with ***Razor Pages***.

Create and run your first ***ASP.NET Razor Pages*** project:

  <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="razor-create.sh" />

What the default generated project contains:

- The **Program.cs** and **Startup.cs** files

  These files set up the web server and ***ASP.NET* Core** pipeline.
- The **wwwroot** directory

  It contains *static* assets like ***CSS***, ***JavaScript*** and image files. Files in **wwwroot** will be served as *static* content, and can be bundled and minified automatically.
- The **appsettings.json** file

  It contains configuration settings ***ASP.NET* Core** will load on startup. You can use this to store database connection strings or other things that you don't want to hard-code.
- The **launchSettings.json** property file

  This is basically the configuration file for when the project is run.
- The **Pages** directory

  This folder contains all of our pages (*\*.cshtml*) files and their respective ***M*odels** (*\*.cshtml.cs*).

### Routing in Razor Pages

- Routing in ***ASP.NET Razor Pages*** maps *URL*s to *Physical file* on disk

  | URL | Maps to |
  | --- | --- |
  |  |  |
  | www.domain.com | /Pages/Index.cshtml |
  | www.domain.com/index | /Pages/Index.cshtml |
  | www.domain.com/account | /Pages/Account.cshtml |
  | www.domain.com/account | /Pages/Account/Index.cshtml |
  | www.domain.com/randomname/account | /Pages/RandomName/Account.cshtml |
- ***Razor Pages*** needs a *root* folder
- *Index.cshtml* is the default document

### Create a simple Page to display Cars

- Add this to the **Pages/Shared/_Layout.cshtml** file, after the other navbar links

  <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="razor-_Layout.cshtml" />

- Create a **CarList** directory inside the **Pages** one and now we'll make the following files there:
  - **Index.cshtml**

    <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="razor-Index.cshtml" />

  - **Index.cshtml.cs**

    <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="razor-Index.cshtml.cs" />

  With the logic existing above, it is easy to write **Razor Pages** to *Create* and *Edit* cars in the database.

## MVC

Create and run your first ***ASP.NET MVC*** project:

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="mvc-create.sh" />

What the default generated project contains:

- The **Program.cs** and **Startup.cs** files

  These files set up the web server and ***ASP.NET* Core** pipeline.
- The ***M*odels**, ***V*iews**, and ***C*ontrollers** directories

  This project type is based on the ***MVC*** architecture.
- The **wwwroot** directory

  It contains *static* assets like ***CSS***, ***JavaScript*** and image files. Files in **wwwroot** will be served as *static* content, and can be bundled and minified automatically.
- The **appsettings.json** file

  It contains configuration settings ***ASP.NET* Core** will load on startup. You can use this to store database connection strings or other things that you don't want to hard-code.
More specifics:
- Routes that are handled by ***C*ontrollers** are called actions, and are represented by methods in the ***C*ontroller** class. For example, the **HomeController** includes three action methods (**Index**, **About**, and **Contact**) which are mapped by ***ASP.NET* Core** to these route URLs:

  ```
  |- localhost:5000/Home->          Index()
  |- localhost:5000/Home/About->    About()
  |- localhost:5000/Home/Contact -> Contact()
  ```

- ***V*iews** in ***ASP.NET* Core** are built using the Razor templating language, which combines ***HTML*** and ***C#***.

  Most view code is just ***HTML***, with the occasional ***C#*** statement added in to pull data out of the ***V*iew *M*odel** and turn it into text or ***HTML***.

  The ***C#*** statements are prefixed with the **@** symbol.
- The base ***HTML*** file, which contains the *\<body>* tag, is called the **layout *V*iew**.

  It can be found at

  ```
  |- Views/Shared/_Layout.cshtml
  ```

- As mentioned above, to edit the ***CSS*** or anything *static*, you must go to

  ```
  |- wwwroot/css/site.css
  ```

### Create simple Model, View and Controller to display Cars

- Add this to the **Views/Shared/_Layout.cshtml** file, after the other navbar links

  <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="mvc-_Layout.cshtml" />

- Create a **CarsController.cs** with the following code

  <Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="mvc-CarsController.cs" />

- Create a **Cars** directory inside the **Views** one and now we'll make the following files there.

## Web API

Web ***API*** (***A*pplication *P*rogramming *I*nterface**) is a set of subroutine definitions with the scope of managing data between clients and servers. Building ***API***s over ***HTTP*** protocol allows third-party apps to interact with a server thanks to the application protocol.

Create and run your first ***ASP.NET API*** project:

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="webapi-create.sh" />

What the default generated project contains:

- The **Program.cs** and **Startup.cs** files

  These files set up the web server and ***ASP.NET* Core** pipeline.
- A **WeatherForecast** class

  This is our ***M*odel** which describes the data.
- A ***C*ontrollers** directory holding the **WeatherForecastController**

  This ***C*ontroller** is responsible for generating data based on our ***M*odel** and returning it in *JSON* every time we visit the link below.

Now, if you visit [https://localhost:5001/weatherforecast](https://localhost:5001/weatherforecast), you'll be presented with data in *JSON* format.

For example,

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="webapi-results.json" />

## Useful features

### Quick Route Short Circuit

In [.NET 8](https://dotnet.microsoft.com/en-us/download/dotnet/8.0), C\# got an amazing new feature.

Let's say we have an API with several endpoints, and we want to add a new one that just returns `"Hello World"`.

We can do this:

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="Program_without_shortcircuit.cs" />

You can notice pretty quickly, that we've added a simple middleware which simply logs the time it took to process the request.
In a real-world scenario, this could be a lot more complex, and could even be a third-party library that takes up resources from our server.

This new feature allows us to completely bypass all middleware and return a response immediately.
To use this, simply add `.ShortCircuit();` at the end of your route declaration.

In this case, we get something like this:

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="shortcircuit.cs" />

Now, everytime we call the `/` endpoint, we get a response immediately, without any middleware being called.
This practice can, depending on the situation, save a lot of resources.

It's also useful when you want to send a quick 404 for frequently called endpoints that don't exist in your API.

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="shortcircuit404.cs" />

By using this, everytime a crawler or a bot tries to access an endpoint that doesn't exist, we can send a quick 404 response without having to go through any of the middleware.

The end result of the above `Program.cs` file is:

<Gist gistCode="77ff9b22b09de953446ab8b971064892" fileName="Program_with_shortcircuit.cs" />

> **Note:** This feature is only available in **.NET 8** and above.
>
> **Note:** This feature is **NOT** available in controllers currently and we don't know if it'll ever be.

## Resources

- [ASP.NET documentation](https://docs.microsoft.com/en-us/aspnet/)
- [ASP.NET Core Succinctly book](https://www.syncfusion.com/succinctly-free-ebooks/asp-net-core-succinctly)
- [ASP.NET Core 3.1 Succinctly book](https://www.syncfusion.com/succinctly-free-ebooks/asp-net-core-3-1-succinctly)
- [The Little ASP.NET Core Book (2018)](https://s3.amazonaws.com/recaffeinate-files/LittleAspNetCoreBook.pdf)
- [JetBrains on Razor Pages](https://www.jetbrains.com/dotnet/guide/tutorials/basics/razor-pages/)
- [w3schools](https://www.w3schools.com/asp/default.asp)
- [Adding JWT Authentication & Authorization in ASP.NET Core by Nick Chapsas](https://youtu.be/mgeuh8k3I4g)
- [AspNetCore-Developer-Roadmap repository](https://github.com/MoienTajik/AspNetCore-Developer-Roadmap)
- [Tag Helpers documentation](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/)
- [Claims documentation](https://docs.microsoft.com/en-us/dotnet/api/system.security.claims)
- [API versioning](https://code-maze.com/aspnetcore-api-versioning/)
